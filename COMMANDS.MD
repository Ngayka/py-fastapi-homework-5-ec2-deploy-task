# üöÄ FASTAPI DEPLOY CHEATSHEET (Linux + Docker + Nginx)

## üß≠ –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –≤ —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ

* pwd                 # –ø–æ–∫–∞–∑–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é
* ls -la              # —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª—ñ–≤ –∑ –¥–µ—Ç–∞–ª—è–º–∏
* cd /path/to/project # –ø–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–µ–∫—Ç—É
* cd ..               # –Ω–∞ —Ä—ñ–≤–µ–Ω—å –≤–∏—â–µ
* 

## üóÇ –†–æ–±–æ—Ç–∞ –∑ —Ñ–∞–π–ª–∞–º–∏

* cat .env                # –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ñ–∞–π–ª .env
* nano .env               # –≤—ñ–¥—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ .env
* touch Dockerfile        # —Å—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π —Ñ–∞–π–ª
* mkdir app               # —Å—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∞–ø–∫—É
* rm -rf old_folder       # –≤–∏–¥–∞–ª–∏—Ç–∏ –ø–∞–ø–∫—É –∑ –≤–º—ñ—Å—Ç–æ–º
* mv old.py new.py        # –ø–µ—Ä–µ–π–º–µ–Ω—É–≤–∞—Ç–∏ –∞–±–æ –ø–µ—Ä–µ–º—ñ—Å—Ç–∏—Ç–∏ —Ñ–∞–π–ª

## ‚öôÔ∏è Python / FastAPI –ª–æ–∫–∞–ª—å–Ω–æ

* python3 -m venv .venv
* source .venv/bin/activate
* pip install -r requirements.txt
* 
* uvicorn main:app --host 0.0.0.0 --port 8000 --reload

## üê≥ Docker / Docker Compose

* docker compose build                # –∑—ñ–±—Ä–∞—Ç–∏ –æ–±—Ä–∞–∑–∏
* docker compose up -d                # –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ —É —Ñ–æ–Ω—ñ
* docker compose down                 # –∑—É–ø–∏–Ω–∏—Ç–∏ —ñ –≤–∏–¥–∞–ª–∏—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏
* docker compose logs backend         # –ø–æ–¥–∏–≤–∏—Ç–∏—Å—å –ª–æ–≥–∏ –±–µ–∫–µ–Ω–¥—É
* docker compose exec backend bash    # –∑–∞–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–µ–∫–µ–Ω–¥—É
* docker ps                           # –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –ø—Ä–∞—Ü—é—é—Ç—å

## üåê Nginx

## üìÑ –ö–æ–Ω—Ñ—ñ–≥ –ø—Ä–∏–∫–ª–∞–¥:

`server {
    server_name example.com;
    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}`

## üìã –ö–æ–º–∞–Ω–¥–∏:

`sudo nginx -t  `                 # –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é
`sudo systemctl restart nginx`    # –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ nginx
`sudo systemctl status nginx   `  # –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å

## üî• Systemd (—è–∫—â–æ –∑–∞–ø—É—Å–∫–∞—î—à –±–µ–∑ Docker)

* /etc/systemd/system/fastapi.service
* [Unit]
* Description=FastAPI App
* After=network.target
* 
* [Service]
* User=ubuntu
* WorkingDirectory=/home/ubuntu/app
* ExecStart=/home/ubuntu/app/.venv/bin/uvicorn main:app --host 0.0.0.0 --port 8000
* Restart=always
* 
* [Install]
* WantedBy=multi-user.target

## üìã –ö–æ–º–∞–Ω–¥–∏:

`sudo systemctl daemon-reload`
`sudo systemctl enable fastapi`
`sudo systemctl start fastapi`
`sudo systemctl status fastapi`
`sudo journalctl -u fastapi -f `   # –ø–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤ —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ

## üß© –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ—Ä—Ç—ñ–≤ —ñ –º–µ—Ä–µ–∂—ñ

* curl http://localhost:8000/docs
* ping google.com
* netstat -tulnp | grep 8000

## ü™£ –ö–µ—Ä—É–≤–∞–Ω–Ω—è –ø—Ä–∞–≤–∞–º–∏

* sudo chown -R $USER:$USER /path/to/project
* chmod +x start.sh
* 

## üí° –ö–æ—Ä–∏—Å–Ω–µ

* sudo apt update && sudo apt upgrade -y
* sudo apt install docker docker-compose nginx -y
* htop                     # –ø–µ—Ä–µ–≥–ª—è–¥ –ø—Ä–æ—Ü–µ—Å—ñ–≤
* df -h                    # –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—ñ–ª—å–Ω–µ –º—ñ—Å—Ü–µ
* 